TCP的握手挥手的原理早就知道了，但是一直没有去想太多（最大的缺点啊。。那么。。

- 为什么需要三次握手呢？

SYN包是做什么的？一个方面，表示希望和对端建立连接，也可以说是同步，另一个方面，TCP不是UDP，为了保障准确的传输。所以SYN包中含有TCP控制的参数，比如窗口长度，MSS选项（最大分节长度之类之类的）。  

而三次握手中，首先主动方发送SYN，被动方发送SYN和确认的ACK，最后主动发发送确认的ACK。如果变成两次握手（也就说被动方不发送SYN），会出现这种情况：  

由于网络的问题，A（主动方）给B（被动方）发了数个SYN，此时B接受了（可能是某个，某几个）也回发了ACK，如果这几个SYN中的参数根本不一致的话，之后A、B的对话可能就混乱了。其实归根结底是TCP全双工的关系。也就是说防止失效的连接干扰新的连接  

- 为什么需要四次挥手？  

四次挥手的过程略，为什么是四次呢？我们注意到三次握手中第二次是SYN和ACK合并发送的，但是挥手的时候则不一样，关闭是需要两方都关闭的，但是FIN和ACK是不合并发送的，因为在接到主动方关闭申请并回送ACK的时候，可能数据并没有传送完。所以在将数据传送完了，再发送ACK
